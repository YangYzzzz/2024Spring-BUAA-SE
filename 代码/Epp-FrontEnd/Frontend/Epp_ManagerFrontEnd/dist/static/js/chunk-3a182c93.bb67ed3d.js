(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a182c93"],{"1edb":function(t,e,n){"use strict";n("9827")},"4da1":function(t,e,n){},"72a6":function(t,e,n){"use strict";n("a9df")},9827:function(t,e,n){},a9df:function(t,e,n){},ac8f:function(t,e,n){"use strict";n.d(e,"q",(function(){return a})),n.d(e,"t",(function(){return o})),n.d(e,"s",(function(){return s})),n.d(e,"r",(function(){return c})),n.d(e,"k",(function(){return u})),n.d(e,"p",(function(){return p})),n.d(e,"a",(function(){return l})),n.d(e,"l",(function(){return m})),n.d(e,"m",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"i",(function(){return h})),n.d(e,"h",(function(){return _})),n.d(e,"j",(function(){return g})),n.d(e,"o",(function(){return y})),n.d(e,"n",(function(){return v})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return I})),n.d(e,"u",(function(){return C})),n.d(e,"g",(function(){return S})),n.d(e,"f",(function(){return x})),n.d(e,"e",(function(){return w}));n("1da1"),n("96cf"),n("99af");var i=n("7424"),r=n("b775");var a=function(t){var e="Interpretation",n=i["BASE_URL_IP"]+"/api/".concat(e,"/getkeywords");return Object(r["e"])(n,"get",t)},o=function(t){var e=i["BASE_URL_IP"]+"/api/recommend";return Object(r["e"])(e,"get",t)},s=function(t){var e="Interpretation",n=i["BASE_URL_IP"]+"/api/".concat(e,"/getvis");return Object(r["e"])(n,"get",t)},c=function(t){var e="Interpretation",n=i["BASE_URL_IP"]+"/api/".concat(e,"/gettags");return Object(r["e"])(n,"get",t)},u=function(t,e){var n=i["BASE_URL_IP"]+"/api/comment";return Object(r["e"])(n,t,e)},p=function(t){var e=i["BASE_URL_IP"]+"/api/user/profile";return t?Object(r["e"])(e,"get",{user_id:t}):Object(r["e"])(e,"get")},l=function(t,e,n,a){var o=1===e?"Interpretation":"Note",s=i["BASE_URL_IP"]+"/api/".concat(o,"/").concat(t);return Object(r["e"])(s,n,a)},m=function(t){if(null===t||void 0===t)return"无";var e=new Date(t),n=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),i=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),r=e.getHours()<10?"0"+e.getHours():e.getHours();return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()," ").concat(r,":").concat(i,":").concat(n)},d=function(t){return t?Object(r["e"])(i["PaperAll"],"get",{user_id:t}):Object(r["e"])(i["PaperAll"],"get")},f=function(t,e){var n=i["BASE_URL_IP"]+"/api/comment/create";return Object(r["e"])(n,t,e)},h=function(t,e){var n=i["BASE_URL_IP"]+"/api/comment/delete";return Object(r["e"])(n,t,e)},_=function(t){var e=i["BASE_URL_IP"]+"/api/discussion/create";return Object(r["e"])(e,"post",t)},g=function(t,e){var n=i["BASE_URL_IP"]+"/api/discussion/delete";return Object(r["e"])(n,t,e)},y=function(t){return t?Object(r["e"])(i["UserAll"],"get",{user_id:t}):Object(r["e"])(i["UserAll"],"get")},v=function(t){var e=i["BASE_URL_IP"]+"/api/manage/users";return Object(r["e"])(e,"get",t)},b=function(t){var e=i["BASE_URL_IP"]+"/api/user/delete";return Object(r["e"])(e,"post",t)},I=function(t){var e=i["BASE_URL_IP"]+"/api/user/changeinfo";return Object(r["e"])(e,"post",t)},C=function(t){var e=i["BASE_URL_IP"]+"/api/manage/users";return Object(r["e"])(e,"get",t)},S=function(t){var e=i["BASE_URL_IP"]+"/api/admin/add/user";return Object(r["e"])(e,r["a"].POST,t)},x=function(t){var e=i["BASE_URL_IP"]+"/api/admin/add/expert";return Object(r["e"])(e,r["a"].POST,t)},w=function(t){var e=i["BASE_URL_IP"]+"/api/admin/add/enterprise";return Object(r["e"])(e,r["a"].POST,t)}},ad3a:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-card",{attrs:{bordered:!1}},[n("a-spin",{attrs:{spinning:t.loading}},[n("a-list",{attrs:{"item-layout":"vertical",size:"large",pagination:t.pagination,"data-source":t.listData},scopedSlots:t._u([{key:"renderItem",fn:function(e){return n("a-list-item",{key:"item.title"},[n("template",{slot:"actions"},[n("span",[n("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"star-o"}}),t._v(" "+t._s(e.startext)+" ")],1),n("span",[n("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"eye"}}),t._v(" "+t._s(e.read)+" ")],1),n("span",[n("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"like-o"}}),t._v(" "+t._s(e.liketext)+" ")],1),n("span",[n("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"download"}}),t._v(" "+t._s(e.download)+" ")],1),n("span",[n("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"fire"}}),t._v(" "+t._s(e.score)+" ")],1),n("span",[n("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"clock-circle"}}),t._v(" "+t._s(e.messagetext)+" ")],1)]),n("a-space",{staticStyle:{"margin-right":"20px"},attrs:{slot:"extra",direction:"vertical",width:"272",align:"end"},slot:"extra"}),n("a-list-item-meta",[n("a",{attrs:{slot:"title",href:e.href},slot:"title"},[n("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"book"}}),t._v(" "),t._v(" "+t._s(e.title)+" ")],1)]),n("a",{staticClass:"textbreak",staticStyle:{display:"block"},attrs:{href:"javascript:void(0)"}},[n("a-icon",{staticStyle:{"margin-right":"8px"},attrs:{type:"user"}}),t._v(" "),t._v(" "+t._s(t._f("ellipsis")(e.content))+" ")],1)],2)}}])})],1)],1)],1)},r=[],a=n("1da1"),o=(n("96cf"),n("fb6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-wrapper"},[n("div",{attrs:{id:t.editorId}})])}),s=[];n("a9e3");function c(t,e){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}var u={name:"Editor",props:{value:{type:String,default:""},valueType:{type:String,default:"html",validator:function(t){return c(t,["html","text"])}},changeInterval:{type:Number,default:200},cache:{type:Boolean,default:!1}},computed:{editorId:function(){return"editor".concat(this._uid)}},methods:{setHtml:function(t){this.editor.txt.html(t)}}},p=u,l=(n("1edb"),n("2877")),m=Object(l["a"])(p,o,s,!1,null,null,null),d=m.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-card",{attrs:{bordered:!1,"dis-hover":""}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v(" 发布者: "),n("a",{attrs:{href:"javascript:0",id:t.id}},[t._v(t._s(""===t.creator["username"]?"未知用户":t.creator["username"]))])]),n("p",{attrs:{slot:"extra"},slot:"extra"},[t._v(" "+t._s(1===t.kind?"论文解读":"批注")+"发布于: "+t._s(t.createAt)+" ")]),n("a-Row",[t._v(" 解读对象: "),n("a",{attrs:{href:t.source}},[t._v(" "+t._s(t.citation)+" ")]),t._v("-------"+t._s(t.publishedYear)+"年 ")]),n("a-Row",[t._v(" 标题: "+t._s(t.title)+" ")]),n("br"),n("br"),n("br"),n("editor",{domProps:{innerHTML:t._s(t.content)}}),n("br"),n("a-Row",t._l(t.tags,(function(e,i){return n("a-Tag",{key:i,staticClass:"sysTopics"},[t._v(t._s(e.name))])})),1),n("br"),0===t.displayType?[n("a-space",[n("a-button",{staticStyle:{"font-size":"14px"},attrs:{href:"javascript:0"}},[n("a-Icon",{attrs:{type:"star-o"}}),t._v("收藏"+t._s(t.totalFavor)+" ")],1),n("a-button",{staticStyle:{"font-size":"14px"},attrs:{href:"javascript:0"}},[n("a-Icon",{attrs:{type:"like-o"}}),t._v("点赞 "+t._s(t.totalLike)+" ")],1),n("a-button",{staticStyle:{"font-size":"14px"},on:{click:t.onComment}},[n("a-Icon",{attrs:{type:"message"}}),t._v("评论 "+t._s(t.totalcomment)+" ")],1)],1),t.showComment?n("a-Card",{staticStyle:{"margin-top":"10px"}},[n("comment",t._b({},"comment",t.comments,!1))],1):t._e()]:t._e()],2)],1)},h=[],_=n("5530"),g=(n("d81d"),n("159b"),n("4de4"),n("07ac"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.comments,(function(e,i){return n("div",{key:i,staticClass:"author-title reply-father"},[n("a-Avatar",{staticClass:"header-img",attrs:{size:"default",src:e.headImg}}),n("div",{staticClass:"author-info"},[n("span",{staticClass:"author-name"},[t._v(t._s(e.name))]),n("span",{staticClass:"author-time"},[t._v(t._s(e.time))])]),n("div",{staticClass:"icon-btn"},[n("a-popconfirm",{attrs:{confirm:"",title:"确定要删除吗?删除后将不可恢复。"},on:{confirm:function(e){return t.deleteItem(i,t.reply)}}},[n("a-Button",[n("a-Icon",{attrs:{type:"delete"}}),t._v("删除 ")],1)],1),t._e()],1),n("div",{staticClass:"talk-box"},[n("p",[n("span",{staticClass:"reply"},[n("editor",{domProps:{innerHTML:t._s(e.comment)}})],1)])]),n("div",{staticClass:"reply-box"},t._l(e.reply,(function(e,r){return n("div",{key:r,staticClass:"author-title"},[n("a-Avatar",{staticClass:"header-img",attrs:{size:"default",src:e.headImg}}),n("div",{staticClass:"author-info"},[n("span",{staticClass:"author-name"},[t._v(t._s(e.name))]),n("span",{staticClass:"author-time"},[t._v(t._s(e.time))])]),n("div",{staticClass:"icon-btn"},[n("a-popconfirm",{attrs:{confirm:"",title:"确定要删除吗?删除后将不可恢复。"},on:{confirm:function(e){return t.deleteReply(i,r)}}},[n("a-Button",[n("a-icon",{attrs:{type:"delete"}}),t._v("删除 ")],1)],1)],1),n("div",{staticClass:"reply-box"})],1)})),0)],1)})),0)}),y=[],v=(n("a434"),n("ac8f")),b={bind:function(t,e){function n(n){if(t.contains(n.target))return!1;e.expression&&e.value(n)}t.vueClickOutside=n,document.addEventListener("click",n)},update:function(){},unbind:function(t){document.removeEventListener("click",t.vueClickOutside),delete t.vueClickOutside}},I={name:"ArticleComment",components:{editor:d},props:{myHeader:{type:String,default:"https://ae01.alicdn.com/kf/Hd60a3f7c06fd47ae85624badd32ce54dv.jpg"},myId:{type:Number,default:19870621},comments_init:{type:Array,default:function(){return[]}},interpretation_id:{type:Number,default:0},commentType:{type:Number,default:0}},data:function(){return{btnShow:!1,index:"0",replyComment:"",myName:"SUPERMANAGER",to:"",toId:-1,comments:this.comments_init}},directives:{clickoutside:b},methods:{inputFocus:function(){var t=document.getElementById("replyInput");t.style.padding="8px 8px",t.style.border="2px solid blue",t.focus()},showReplyBtn:function(){this.btnShow=!0},hideReplyBtn:function(){this.btnShow=!1},showReplyInput:function(t,e,n){this.comments[this.index].inputShow=!1,this.index=t,this.comments[t].inputShow=!0,this.to=e,this.toId=n},_inputShow:function(t){return this.comments[t].inputShow},deleteItem:function(t){var e=this,n=0===this.commentType?v["i"]:v["j"];n("post",{id:this.comments[t].commentId}).then((function(n){e.comments.splice(t,1),e.$message.success("删除成功！")})).catch((function(t){e.$message.success("删除失败!")}))},deleteReply:function(t,e){var n=this,i=0===this.commentType?v["i"]:v["j"];i("post",{id:this.comments[t].reply[e].commentId}).then((function(i){n.comments[t].reply.splice(e,1),n.$message.success("删除成功！")})).catch((function(t){n.$message.success("删除失败!")}))},sendComment:function(){var t=this;if(this.replyComment){var e={},n=document.getElementById("replyInput"),i=(new Date).getTime(),r=this.dateStr(i);e.name=this.myName,e.id=this.myId,e.comment=this.replyComment,e.headImg=this.myHeader,e.time=r,e.reply=[],e.commentNum=0,e.like=0,0===this.commentType?Object(v["d"])("post",{interpretation_id:this.interpretation_id,content:e.comment}).then((function(i){t.$message.success("评论成功!"),e.commentId=i.data.id,t.comments.push(e),t.replyComment="",n.innerHTML=""})).catch((function(e){t.$Message.error("评论失败!")})):Object(v["h"])({topic_id:this.interpretation_id,content:e.comment}).then((function(i){t.$Message.success("评论成功!"),e.commentId=i.data.id,t.comments.push(e),t.replyComment="",n.innerHTML=""})).catch((function(e){t.$Message.error("评论失败!")}))}else this.$message({showClose:!0,type:"warning",message:"评论不能为空"})},sendCommentReply:function(t){var e=this;if(this.replyComment){var n={},i=(new Date).getTime(),r=this.dateStr(i);n.name=this.myName,n.to=this.to,n.id=this.myId,n.headImg=this.myHeader,n.comment=this.replyComment,n.time=r,n.commentNum=0,n.like=0,0===this.commentType?Object(v["d"])("post",{interpretation_id:this.interpretation_id,content:n.comment,parent_comment_id:this.comments[t].commentId,to_user_id:this.toId}).then((function(i){e.$Message.success("评论成功!"),n.commentId=i.data.id,e.comments[t].reply.push(n),e.replyComment="",document.getElementsByClassName("reply-comment-input")[t].innerHTML=""})).catch((function(t){e.$Message.error("评论失败!")})):Object(v["h"])({topic_id:this.interpretation_id,content:n.comment,parent_discussion_id:this.comments[t].commentId,to_user_id:this.toId}).then((function(i){e.$Message.success("评论成功!"),n.commentId=i.data.id,e.comments[t].reply.push(n),e.replyComment="",document.getElementsByClassName("reply-comment-input")[t].innerHTML=""})).catch((function(t){e.$Message.error("评论失败!")}))}else this.$message({showClose:!0,type:"warning",message:"评论不能为空"})},onDivInput:function(t){this.replyComment=t.target.innerHTML},dateStr:function(t){var e,n=(new Date).getTime();return n=parseInt((n-t)/1e3),n<600?"刚刚":n<3600&&n>=600?(e=Math.floor(n/60),e+"分钟前"):n<86400&&n>=3600?(e=Math.floor(n/60/60),e+"小时前"):n<2592e3&&n>=86400?(e=Math.floor(n/60/60/24),e+"天前"):(t=new Date(parseInt(t)),t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate())}}},C=I,S=(n("72a6"),Object(l["a"])(C,g,y,!1,null,null,null)),x=S.exports,w={name:"PaperCard",components:{comment:x,Editor:d,editor:d},props:{id:{type:Number,default:0},creator:{type:Object,default:function(){return{username:"xx",id:"0"}}},title:{type:String,default:"引用"},kind:{type:Number,default:1},citeMessageInit:{type:String,default:"引用"},createAt:{type:String,default:"年/月/日"},content:{type:String,default:"这是一个展示示例"},tags:{type:Array,default:function(){return[]}},isLike:{type:Boolean,default:!1},isCollect:{type:Boolean,default:!1},likeNumber:{type:Number,default:0},favorNumber:{type:Number,default:0},commentNum:{type:Number,default:0},displayType:{type:Number,default:0},source:{type:String,default:"qq"},citation:{type:String,default:"ss"},publishedYear:{type:Number,default:0},interpretations:{type:Array,default:function(){return[]}},userpic:{type:String,default:"http://116.63.14.146:8000/api/images/default_user_icon.jpg"}},data:function(){return{like:this.$props.isLike,totalLike:this.$props.likeNumber,totalcomment:this.$props.commentNum,totalFavor:this.$props.favorNumber,collect:this.$props.isCollect,cited:!1,showComment:!1,comments:[],detailController:!1,showUserControl:!1,userInfo:{},htmlTitle:this.title,followText:"",paperid:"1"}},computed:{likeColor:function(){return this.like?"#0084ff":"#747b8b"},paperId:function(){return this.paperid},collectType:function(){return this.collect?"ios-heart":"ios-heart-outline"},collectColor:function(){return this.collect?"#fb7299":"default"},citeStyle:function(){return this.cite?"margin-left:100px;":""},citeMessage:function(){return this.cited?"取消":this.citeMessageInit},popId:function(){return"pop"+this.$props.id}},methods:{onLike:function(){this.like=!1},onCollect:function(){this.collect=!1},onComment:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getComments();case 2:this.showComment=!this.showComment;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showDetail:function(){var t=this;0===this.evidences.length?Object(v["a"])(this.id,this.kind,"get").then((function(e){t.evidences=e.data.evidences,t.detailController=!0})).catch((function(t){})):this.detailController=!0},convertComments:function(t){t=t.map((function(t){return{commentId:t.id,name:t.username,time:Object(v["l"])(t.created_at),id:t.user_id,comment:t.text,to:t.to_user?t.to_user.username:0,toId:t.to_user?t.to_user.id:"",inputShow:!1,headImg:"http://116.63.14.146:8000/api/"+t.userpic,parent_comment_id:t.parent_comment_id,reply:[]}}));var e={};return t.filter((function(t){return void 0===t.parent_comment_id})).forEach((function(t){e[t.commentId]=t})),t.forEach((function(t){void 0!==t.parent_comment_id&&e[t.parent_comment_id].reply.push(t)})),Object.values(e)},getComments:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="",n="",i="",t.next=5,Object(v["p"])().then((function(t){n=t.data.id,e=t.data.username,i="http://116.63.14.146:8000/api/"+t.data.userpic})).catch((function(t){}));case 5:return r={myName:e,interpretation_id:this.id,myHeader:i,myId:n},t.next=8,Object(v["k"])("get",{interpretation_id:this.id,pindex:1,psize:20}).then((function(t){a.comments=Object(_["a"])(Object(_["a"])({},r),{},{comments_init:a.convertComments(t.data.comment_list)})})).catch((function(t){a.comments=r}));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},j=w,k=Object(l["a"])(j,f,h,!1,null,null,null),O=k.exports,R=(n("99af"),n("b775")),E=n("7424"),L=function(t){var e="".concat(E["BASE_URL_IP"],"/api/manage/papers");return Object(R["e"])(e,R["a"].GET,t)},A=[],P={filters:{ellipsis:function(t){return t?t.length>130?t.slice(0,130)+"...":t:""}},name:"ArticleList",components:{PaperCard:O,editor:d},data:function(){var t=this;return{loading:!1,pageIndex:1,data:[],totalCnt:1,showCutter:!1,post:{},interpretation:{},postType:0,InterpretationeType:0,postSelectType:"论文解读",projectTotalCnt:1,projectList:[],showDetail:!1,showModify:!1,listData:A,pagination:{onChange:function(e){t.handlePageChange(e)},current:1,total:0,pageSize:5},actions:[{type:"star-o",text:""},{type:"like-o",text:""},{type:"message",text:""}]}},mounted:function(){this.init()},methods:{init:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loadPost();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handlePageChange:function(t){this.pagination.current=t,this.loadPost()},loadPost:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e={keyword:"",page_num:this.pagination.current,page_size:this.pagination.pageSize},t.prev=2,t.next=5,L({params:e}).then((function(t){var e=t.data;A.length=0,n.pagination.total=e.total;for(var i=0;i<e.papers.length;i++)A.push({id:e.papers[i].paper_id,href:"javascript:0",title:e.papers[i].title,content:e.papers[i].authors[1],messagetext:e.papers[i].publication_date,read:e.papers[i].read_count,liketext:e.papers[i].like_count,startext:e.papers[i].collect_count,download:e.papers[i].download_count,score:e.papers[i].score})}));case 5:t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](2);case 9:return t.prev=9,this.loading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[2,7,9,12]])})));function e(){return t.apply(this,arguments)}return e}()}},T=P,B=(n("f10e"),Object(l["a"])(T,i,r,!1,null,"2b5f999a",null));e["default"]=B.exports},f10e:function(t,e,n){"use strict";n("4da1")}}]);